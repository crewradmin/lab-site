<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Subdomain Control Center ¬∑ Multiverse Console</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    :root {
      --bg-top: #020617;
      --bg-mid: #020617;
      --bg-bottom: #000000;
      --accent-1: #22c55e;
      --accent-2: #0ea5e9;
      --accent-3: #a855f7;
      --accent-4: #f97316;
      --text-main: #e5e7eb;
      --text-muted: #9ca3af;
      --shell-bg: rgba(15, 23, 42, 0.9);
      --shell-border: rgba(148, 163, 184, 0.35);
      --radius-lg: 24px;
      --radius-md: 18px;
      --radius-sm: 12px;
      --radius-pill: 999px;
      --shadow-strong: 0 24px 80px rgba(15, 23, 42, 0.95);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body {
      height: 100%;
      width: 100%;
      overflow-x: hidden;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", sans-serif;
      color: var(--text-main);
    }

    body {
      position: relative;
      display: flex;
      align-items: stretch;
      justify-content: center;
      padding: clamp(1.5rem, 3.5vw, 3rem);
      background:
        radial-gradient(circle at top left, rgba(56, 189, 248, 0.16), transparent 55%),
        radial-gradient(circle at bottom right, rgba(168, 85, 247, 0.18), transparent 60%),
        linear-gradient(to bottom, var(--bg-top), var(--bg-mid) 50%, var(--bg-bottom) 100%);
    }

    /* background stars canvas */

    #starfield {
      position: fixed;
      inset: 0;
      z-index: -2;
      opacity: 0.9;
      pointer-events: none;
    }

    /* moving nebula blobs */

    .nebula {
      position: fixed;
      border-radius: 50%;
      filter: blur(60px);
      opacity: 0.55;
      mix-blend-mode: screen;
      pointer-events: none;
      z-index: -3;
    }

    .nebula.n1 {
      width: 420px;
      height: 420px;
      top: -80px;
      left: -80px;
      background: radial-gradient(circle at 30% 30%, #22c55e, transparent 60%);
      animation: drift-1 26s ease-in-out infinite alternate;
    }

    .nebula.n2 {
      width: 520px;
      height: 520px;
      top: -120px;
      right: -70px;
      background: radial-gradient(circle at 60% 20%, #0ea5e9, transparent 60%);
      animation: drift-2 32s ease-in-out infinite alternate;
    }

    .nebula.n3 {
      width: 480px;
      height: 480px;
      bottom: -140px;
      left: 10%;
      background: radial-gradient(circle at 30% 60%, #a855f7, transparent 65%);
      animation: drift-3 30s ease-in-out infinite alternate;
    }

    @keyframes drift-1 {
      0% { transform: translate3d(0, 0, 0) scale(1); }
      100% { transform: translate3d(90px, 140px, 0) scale(1.2); }
    }
    @keyframes drift-2 {
      0% { transform: translate3d(0, 0, 0) scale(1); }
      100% { transform: translate3d(-120px, 160px, 0) scale(1.1); }
    }
    @keyframes drift-3 {
      0% { transform: translate3d(0, 0, 0) scale(1); }
      100% { transform: translate3d(80px, -100px, 0) scale(1.15); }
    }

    /* OS chrome */

    .shell {
      position: relative;
      width: 100%;
      max-width: 1200px;
      min-height: clamp(520px, 80vh, 780px);
      border-radius: var(--radius-lg);
      background:
        radial-gradient(circle at top center, rgba(148, 163, 184, 0.15), transparent 55%),
        radial-gradient(circle at bottom right, rgba(15, 23, 42, 0.9), rgba(15, 23, 42, 0.98));
      border: 1px solid var(--shell-border);
      box-shadow: var(--shadow-strong);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      backdrop-filter: blur(28px);
    }

    .top-bar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0.75rem 1.2rem;
      border-bottom: 1px solid rgba(30, 64, 175, 0.6);
      background: linear-gradient(to right, rgba(15, 23, 42, 0.85), rgba(15, 23, 42, 0.9));
    }

    .top-left {
      display: flex;
      align-items: center;
      gap: 0.9rem;
    }

    .traffic-lights {
      display: flex;
      gap: 0.35rem;
    }

    .traffic-dot {
      width: 9px;
      height: 9px;
      border-radius: 999px;
      background: radial-gradient(circle, #fecaca, #b91c1c);
      box-shadow: 0 0 10px rgba(248, 113, 113, 0.7);
    }

    .traffic-dot:nth-child(2) {
      background: radial-gradient(circle, #fef9c3, #facc15);
      box-shadow: 0 0 10px rgba(253, 224, 71, 0.8);
    }

    .traffic-dot:nth-child(3) {
      background: radial-gradient(circle, #bbf7d0, #16a34a);
      box-shadow: 0 0 10px rgba(22, 163, 74, 0.8);
    }

    .title-block {
      display: flex;
      flex-direction: column;
      gap: 0.1rem;
    }

    .title-main {
      font-size: 0.9rem;
      letter-spacing: 0.18em;
      text-transform: uppercase;
    }

    .title-sub {
      font-size: 0.72rem;
      color: var(--text-muted);
    }

    .top-right {
      display: flex;
      gap: 0.6rem;
      align-items: center;
      font-size: 0.75rem;
      color: var(--text-muted);
    }

    .pill {
      border-radius: var(--radius-pill);
      padding: 0.25rem 0.7rem;
      border: 1px solid rgba(148, 163, 184, 0.65);
      background: rgba(15, 23, 42, 0.9);
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
    }

    .pill-dot {
      width: 7px;
      height: 7px;
      border-radius: 50%;
      background: radial-gradient(circle, #4ade80, #16a34a);
      box-shadow: 0 0 10px rgba(34, 197, 94, 0.85);
    }

    .main-layout {
      flex: 1;
      display: grid;
      grid-template-columns: 260px minmax(0, 1fr);
      min-height: 0;
    }

    @media (max-width: 880px) {
      .main-layout {
        grid-template-columns: 220px minmax(0, 1fr);
      }
    }

    @media (max-width: 760px) {
      .main-layout {
        grid-template-columns: minmax(0, 1fr);
        grid-template-rows: auto auto;
      }
    }

    /* sidebar */

    .sidebar {
      border-right: 1px solid rgba(30, 64, 175, 0.6);
      background: linear-gradient(to bottom, rgba(15, 23, 42, 0.98), rgba(15, 23, 42, 0.9));
      padding: 1.1rem 1rem;
      display: flex;
      flex-direction: column;
      gap: 1.2rem;
    }

    .sidebar-heading {
      font-size: 0.78rem;
      text-transform: uppercase;
      letter-spacing: 0.18em;
      color: var(--text-muted);
    }

    .app-list {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .app-button {
      position: relative;
      border-radius: var(--radius-md);
      border: 1px solid rgba(51, 65, 85, 0.9);
      padding: 0.6rem 0.7rem;
      background: radial-gradient(circle at 0 0, rgba(148, 163, 184, 0.2), transparent 55%);
      display: flex;
      flex-direction: column;
      gap: 0.2rem;
      cursor: pointer;
      transition:
        border-color 0.16s ease,
        background 0.16s ease,
        transform 0.15s ease,
        box-shadow 0.16s ease;
    }

    .app-button:hover {
      transform: translateY(-2px);
      border-color: rgba(59, 130, 246, 0.9);
      box-shadow: 0 14px 35px rgba(15, 23, 42, 0.95);
    }

    .app-button.active {
      border-color: rgba(56, 189, 248, 0.9);
      box-shadow: 0 18px 45px rgba(15, 23, 42, 0.98), 0 0 25px rgba(56, 189, 248, 0.7);
      background:
        radial-gradient(circle at 0 0, rgba(56, 189, 248, 0.25), transparent 60%),
        radial-gradient(circle at 100% 100%, rgba(34, 197, 94, 0.16), transparent 60%);
    }

    .app-button-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0.4rem;
    }

    .app-button-title {
      display: flex;
      align-items: center;
      gap: 0.45rem;
      font-size: 0.9rem;
      font-weight: 500;
    }

    .app-icon {
      width: 20px;
      height: 20px;
      border-radius: 8px;
      background: radial-gradient(circle at 30% 30%, #e5e7eb, #60a5fa 50%, #1d4ed8 90%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.9rem;
    }

    .app-tag {
      font-size: 0.62rem;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--text-muted);
    }

    .app-desc {
      font-size: 0.74rem;
      color: var(--text-muted);
    }

    .sidebar-footer {
      margin-top: auto;
      font-size: 0.74rem;
      color: var(--text-muted);
      border-top: 1px solid rgba(30, 64, 175, 0.7);
      padding-top: 0.7rem;
      display: flex;
      flex-direction: column;
      gap: 0.2rem;
    }

    .sidebar-footer strong {
      font-weight: 500;
      color: #e5e7eb;
    }

    /* content area */

    .content {
      padding: 1.1rem 1.25rem 1rem;
      display: flex;
      flex-direction: column;
      gap: 0.9rem;
      min-width: 0;
      min-height: 0;
    }

    .content-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 0.8rem;
      margin-bottom: 0.2rem;
    }

    .content-title {
      display: flex;
      flex-direction: column;
      gap: 0.15rem;
    }

    .content-title-main {
      font-size: 1.05rem;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
    }

    .pill-soft {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      border-radius: var(--radius-pill);
      padding: 0.12rem 0.55rem;
      border: 1px solid rgba(148, 163, 184, 0.7);
      color: var(--text-muted);
    }

    .content-title-sub {
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    .content-controls {
      display: flex;
      align-items: center;
      gap: 0.6rem;
      flex-wrap: wrap;
      justify-content: flex-end;
    }

    .small-button {
      border-radius: var(--radius-pill);
      border: 1px solid rgba(148, 163, 184, 0.75);
      background: rgba(15, 23, 42, 0.9);
      color: var(--text-main);
      font-size: 0.78rem;
      padding: 0.35rem 0.9rem;
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      cursor: pointer;
      transition:
        border-color 0.16s ease,
        background 0.16s ease,
        transform 0.15s ease;
    }

    .small-button:hover {
      border-color: rgba(56, 189, 248, 0.9);
      transform: translateY(-1px);
      background: radial-gradient(circle at 0 0, rgba(37, 99, 235, 0.3), rgba(15, 23, 42, 0.95));
    }

    .small-button.primary {
      border-color: rgba(34, 197, 94, 0.9);
      background: linear-gradient(130deg, #22c55e, #0ea5e9);
      color: #020617;
    }

    .small-button.primary:hover {
      border-color: rgba(56, 189, 248, 1);
      transform: translateY(-1px) scale(1.01);
    }

    /* apps wrapper */

    .apps {
      position: relative;
      flex: 1;
      min-height: 0;
      display: flex;
      flex-direction: column;
    }

    .app {
      position: absolute;
      inset: 0;
      opacity: 0;
      pointer-events: none;
      transform: translateY(6px);
      transition:
        opacity 0.22s ease,
        transform 0.22s ease;
      display: flex;
      flex-direction: column;
      gap: 0.8rem;
    }

    .app.active {
      opacity: 1;
      pointer-events: auto;
      transform: translateY(0);
    }

    .app-grid {
      display: grid;
      grid-template-columns: minmax(0, 1.7fr) minmax(0, 1.1fr);
      gap: 0.85rem;
      min-height: 0;
    }

    @media (max-width: 900px) {
      .app-grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .panel {
      position: relative;
      border-radius: var(--radius-md);
      border: 1px solid rgba(148, 163, 184, 0.4);
      background: linear-gradient(to bottom right, rgba(15, 23, 42, 0.96), rgba(15, 23, 42, 0.92));
      box-shadow: 0 16px 42px rgba(15, 23, 42, 0.95);
      padding: 0.85rem 0.9rem;
      display: flex;
      flex-direction: column;
      gap: 0.6rem;
      overflow: hidden;
      min-height: 0;
    }

    .panel-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0.6rem;
      font-size: 0.78rem;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--text-muted);
    }

    .panel-header-left {
      display: inline-flex;
      align-items: center;
      gap: 0.45rem;
    }

    .panel-badge {
      border-radius: var(--radius-pill);
      padding: 0.12rem 0.65rem;
      border: 1px solid rgba(94, 234, 212, 0.8);
      color: #a5f3fc;
      font-size: 0.65rem;
    }

    .panel-body {
      font-size: 0.78rem;
      color: var(--text-muted);
    }

    .panel-body strong {
      color: var(--text-main);
      font-weight: 500;
    }

    .panel-footer {
      margin-top: auto;
      font-size: 0.7rem;
      color: var(--text-muted);
      opacity: 0.9;
      display: flex;
      justify-content: space-between;
      gap: 0.8rem;
      flex-wrap: wrap;
    }

    .pill-mini {
      border-radius: var(--radius-pill);
      padding: 0.14rem 0.6rem;
      border: 1px solid rgba(55, 65, 81, 0.95);
      background: rgba(15, 23, 42, 0.95);
      font-size: 0.7rem;
      display: inline-flex;
      gap: 0.35rem;
      align-items: center;
      color: var(--text-muted);
    }

    .pill-mini span {
      white-space: nowrap;
    }

    /* === Arcade / Comet Chase === */

    #arcade-canvas {
      width: 100%;
      height: clamp(230px, 40vh, 350px);
      border-radius: var(--radius-sm);
      border: 1px solid rgba(30, 64, 175, 0.85);
      background: radial-gradient(circle at 50% 10%, #0f172a, #020617 70%, #000 100%);
      box-shadow:
        inset 0 0 0 1px rgba(15, 23, 42, 0.9),
        0 14px 35px rgba(15, 23, 42, 0.95);
      display: block;
    }

    .hud-row {
      display: flex;
      flex-wrap: wrap;
      gap: 0.6rem;
      margin-top: 0.5rem;
      font-size: 0.76rem;
      color: var(--text-muted);
    }

    .hud-item {
      border-radius: var(--radius-pill);
      border: 1px solid rgba(55, 65, 81, 0.95);
      padding: 0.28rem 0.7rem;
      background: rgba(15, 23, 42, 0.95);
      display: inline-flex;
      align-items: center;
      gap: 0.45rem;
    }

    .hud-label {
      text-transform: uppercase;
      letter-spacing: 0.14em;
      font-size: 0.64rem;
      color: #9ca3af;
    }

    .hud-value {
      font-weight: 500;
      color: #e5e7eb;
    }

    .meter {
      flex: 1;
      min-width: 140px;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
    }

    .meter-bar {
      flex: 1;
      height: 6px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.95);
      border: 1px solid rgba(55, 65, 81, 0.95);
      overflow: hidden;
    }

    .meter-fill {
      width: 0%;
      height: 100%;
      background: linear-gradient(90deg, #22c55e, #eab308, #f97316, #ef4444);
      box-shadow: 0 0 12px rgba(248, 113, 113, 0.9);
      transition: width 0.15s ease-out;
    }

    .hud-help {
      margin-top: 0.35rem;
      font-size: 0.74rem;
      color: var(--text-muted);
    }

    .hud-help kbd {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      border-radius: 4px;
      border: 1px solid rgba(75, 85, 99, 0.9);
      background: rgba(15, 23, 42, 0.9);
      padding: 0.08rem 0.22rem;
      font-size: 0.7rem;
    }

    .game-overlay {
      position: absolute;
      inset: 0.7rem;
      border-radius: var(--radius-md);
      background: radial-gradient(circle at 10% 0%, rgba(148, 163, 184, 0.25), transparent 55%), rgba(15, 23, 42, 0.96);
      display: flex;
      align-items: center;
      justify-content: center;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.2s ease;
      text-align: center;
    }

    .game-overlay.visible {
      opacity: 1;
      pointer-events: auto;
    }

    .game-overlay-inner {
      max-width: 320px;
      padding: 1.1rem 1rem;
    }

    .game-overlay-inner h3 {
      font-size: 1.1rem;
      margin-bottom: 0.4rem;
    }

    .game-overlay-inner p {
      font-size: 0.82rem;
      color: var(--text-muted);
      margin-bottom: 0.7rem;
    }

    /* === Field Lab === */

    #field-canvas {
      width: 100%;
      height: clamp(230px, 40vh, 350px);
      border-radius: var(--radius-sm);
      border: 1px solid rgba(15, 23, 42, 0.95);
      background: radial-gradient(circle at 50% 0%, #0f172a, #020617 70%);
      box-shadow:
        inset 0 0 0 1px rgba(30, 64, 175, 0.7),
        0 16px 42px rgba(15, 23, 42, 0.95);
      display: block;
    }

    .mode-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 0.4rem;
      margin-top: 0.55rem;
    }

    .mode-button {
      border-radius: var(--radius-pill);
      border: 1px solid rgba(55, 65, 81, 0.95);
      background: rgba(15, 23, 42, 0.95);
      color: var(--text-muted);
      font-size: 0.74rem;
      padding: 0.25rem 0.7rem;
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      cursor: pointer;
      transition:
        border-color 0.15s ease,
        background 0.15s ease,
        color 0.15s ease,
        transform 0.15s ease;
    }

    .mode-button.active {
      border-color: rgba(56, 189, 248, 0.9);
      background: radial-gradient(circle at 0 0, rgba(56, 189, 248, 0.25), rgba(15, 23, 42, 0.98));
      color: #e5e7eb;
      transform: translateY(-1px);
    }

    .field-info {
      margin-top: 0.4rem;
      font-size: 0.74rem;
      color: var(--text-muted);
    }

    /* === Lore Terminal === */

    .terminal {
      position: relative;
      border-radius: var(--radius-md);
      border: 1px solid rgba(30, 64, 175, 0.85);
      background: radial-gradient(circle at 0 0, rgba(37, 99, 235, 0.35), transparent 55%), #020617;
      box-shadow:
        inset 0 0 0 1px rgba(15, 23, 42, 0.9),
        0 18px 50px rgba(15, 23, 42, 0.9);
      padding: 0.75rem 0.85rem;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 0.78rem;
      color: #e5e7eb;
      min-height: 180px;
      display: flex;
      flex-direction: column;
      gap: 0.6rem;
    }

    .terminal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 0.6rem;
      font-size: 0.7rem;
      color: #9ca3af;
    }

    .terminal-prompt {
      color: #22c55e;
    }

    .terminal-body {
      flex: 1;
      overflow-y: auto;
      padding-right: 0.25rem;
    }

    .terminal-line {
      margin-bottom: 0.25rem;
    }

    .cursor {
      display: inline-block;
      width: 7px;
      margin-left: 2px;
      background: #e5e7eb;
      animation: blink 1s step-start infinite;
    }

    @keyframes blink {
      0%, 50% { opacity: 1; }
      50.01%, 100% { opacity: 0; }
    }

    .choice-row {
      margin-top: 0.4rem;
      display: flex;
      flex-wrap: wrap;
      gap: 0.4rem;
    }

    .choice-button {
      border-radius: var(--radius-pill);
      border: 1px solid rgba(55, 65, 81, 0.95);
      background: rgba(15, 23, 42, 0.95);
      color: #e5e7eb;
      padding: 0.22rem 0.7rem;
      font-size: 0.72rem;
      cursor: pointer;
      transition:
        border-color 0.15s ease,
        background 0.15s ease,
        transform 0.15s ease;
    }

    .choice-button:hover {
      border-color: rgba(34, 197, 94, 0.9);
      background: radial-gradient(circle at 0 0, rgba(34, 197, 94, 0.3), rgba(15, 23, 42, 0.98));
      transform: translateY(-1px);
    }

    /* bottom stripe */

    .bottom-bar {
      border-top: 1px solid rgba(30, 64, 175, 0.7);
      padding: 0.5rem 1.1rem;
      font-size: 0.72rem;
      display: flex;
      justify-content: space-between;
      gap: 0.6rem;
      color: var(--text-muted);
      background: linear-gradient(to right, rgba(15, 23, 42, 0.98), rgba(15, 23, 42, 0.92));
    }

    .bottom-left {
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
    }

    .bottom-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: radial-gradient(circle, #22c55e, #15803d);
      box-shadow: 0 0 10px rgba(16, 185, 129, 0.9);
    }

    .bottom-right {
      max-width: 420px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      opacity: 0.9;
    }

    /* tiny scrollbar */

    ::-webkit-scrollbar {
      width: 8px;
    }
    ::-webkit-scrollbar-track {
      background: transparent;
    }
    ::-webkit-scrollbar-thumb {
      background: rgba(30, 64, 175, 0.6);
      border-radius: 999px;
    }

    @media (max-width: 640px) {
      body {
        padding: 1.1rem;
      }
    }
  </style>
</head>
<body>
  <canvas id="starfield"></canvas>
  <div class="nebula n1"></div>
  <div class="nebula n2"></div>
  <div class="nebula n3"></div>

  <div class="shell">
    <div class="top-bar">
      <div class="top-left">
        <div class="traffic-lights">
          <div class="traffic-dot"></div>
          <div class="traffic-dot"></div>
          <div class="traffic-dot"></div>
        </div>
        <div class="title-block">
          <div class="title-main">subdomain control center</div>
          <div class="title-sub">a tiny multiverse hiding behind a single CNAME record</div>
        </div>
      </div>

      <div class="top-right">
        <div class="pill">
          <span class="pill-dot"></span>
          <span id="status-pill-text">online ¬∑ idle</span>
        </div>
        <span id="clock-text">--:--:--</span>
      </div>
    </div>

    <div class="main-layout">
      <aside class="sidebar">
        <div>
          <div class="sidebar-heading">apps</div>
          <div class="app-list">
            <button class="app-button active" data-app="arcade">
              <div class="app-button-header">
                <div class="app-button-title">
                  <div class="app-icon">üéÆ</div>
                  <span>Arcade ¬∑ Comet Chase</span>
                </div>
                <span class="app-tag">real-time</span>
              </div>
              <div class="app-desc">
                Drift through a starfield, collect shards, and dodge cosmic debris.
              </div>
            </button>

            <button class="app-button" data-app="field">
              <div class="app-button-header">
                <div class="app-button-title">
                  <div class="app-icon">üåÄ</div>
                  <span>Field Lab</span>
                </div>
                <span class="app-tag">interactive</span>
              </div>
              <div class="app-desc">
                A particle field that bends, swirls, and spirals around your cursor.
              </div>
            </button>

            <button class="app-button" data-app="lore">
              <div class="app-button-header">
                <div class="app-button-title">
                  <div class="app-icon">üìú</div>
                  <span>Lore Terminal</span>
                </div>
                <span class="app-tag">story</span>
              </div>
              <div class="app-desc">
                Discover the legend of your subdomain in a tiny branching console.
              </div>
            </button>
          </div>
        </div>

        <div class="sidebar-footer">
          <div>Connected to: <strong>testingdomconnect.crewr.co</strong></div>
          <div>Served via: <strong>GitHub Pages ¬∑ HTTPS</strong></div>
        </div>
      </aside>

      <section class="content">
        <div class="content-header">
          <div class="content-title">
            <div class="content-title-main">
              <span id="app-title-label">Arcade ¬∑ Comet Chase</span>
              <span class="pill-soft" id="app-label-tag">LIVE MODULE</span>
            </div>
            <div class="content-title-sub" id="app-subtitle">
              Use WASD or arrows to slip through the void, grab shards, and avoid the red hazards.
            </div>
          </div>

          <div class="content-controls">
            <button class="small-button primary" id="focus-arcade">
              <span>Jump into arcade</span> <span>‚ü∂</span>
            </button>
            <button class="small-button" id="randomize-status">
              Shuffle status line
            </button>
          </div>
        </div>

        <div class="apps">
          <!-- Arcade -->
          <div class="app active" id="app-arcade">
            <div class="app-grid">
              <article class="panel" style="position: relative;">
                <div class="panel-header">
                  <div class="panel-header-left">
                    <span>COMET CHASE ¬∑ LIVE</span>
                    <span class="panel-badge">WASD / ARROWS</span>
                  </div>
                  <span>module 01</span>
                </div>
                <canvas id="arcade-canvas"></canvas>

                <div class="hud-row">
                  <div class="hud-item">
                    <span class="hud-label">Score</span>
                    <span class="hud-value" id="score-value">0</span>
                  </div>
                  <div class="hud-item meter">
                    <span class="hud-label">Shields</span>
                    <div class="meter-bar">
                      <div class="meter-fill" id="shield-fill"></div>
                    </div>
                  </div>
                  <div class="hud-item">
                    <span class="hud-label">Difficulty</span>
                    <span class="hud-value" id="diff-label">Drift</span>
                  </div>
                </div>
                <div class="hud-help">
                  Avoid red hazards, collect cyan shards. Your shield will deplete on impact and slowly recharge when you're safe.
                  <br />
                  Movement: <kbd>W</kbd><kbd>A</kbd><kbd>S</kbd><kbd>D</kbd> or arrow keys.
                </div>

                <div class="game-overlay" id="arcade-overlay">
                  <div class="game-overlay-inner">
                    <h3>Signal lost üí•</h3>
                    <p id="arcade-final-text">
                      You gathered 0 shards before the hull gave out.
                    </p>
                    <button class="small-button primary" id="arcade-restart">
                      Play again
                    </button>
                  </div>
                </div>
              </article>

              <article class="panel">
                <div class="panel-header">
                  <div class="panel-header-left">
                    <span>TELEMETRY</span>
                  </div>
                  <span>side channel</span>
                </div>
                <div class="panel-body">
                  <p>
                    This panel pretends to be a serious analytics dashboard, but really it's just admiring the
                    fact that <strong>a random HTML file</strong> is being treated like a full-blown console app.
                  </p>
                  <p style="margin-top: 0.5rem;">
                    <strong>Tips for max chaos:</strong>
                  </p>
                  <ul style="margin-top: 0.3rem; padding-left: 1rem; list-style: disc;">
                    <li>See how long you can hover near hazards without actually colliding.</li>
                    <li>Try flying only diagonally for no good reason.</li>
                    <li>Pretend these numbers are production metrics. They are absolutely not.</li>
                  </ul>
                </div>
                <div class="panel-footer">
                  <div class="pill-mini">
                    <span>üéØ Sessions today:</span>
                    <span id="session-counter">1</span>
                  </div>
                  <div class="pill-mini">
                    <span>‚ö° Render loop:</span>
                    <span>requestAnimationFrame()</span>
                  </div>
                </div>
              </article>
            </div>
          </div>

          <!-- Field Lab -->
          <div class="app" id="app-field">
            <div class="app-grid">
              <article class="panel">
                <div class="panel-header">
                  <div class="panel-header-left">
                    <span>FIELD LAB</span>
                    <span class="panel-badge">cursor reactive</span>
                  </div>
                  <span>module 02</span>
                </div>
                <canvas id="field-canvas"></canvas>
                <div class="mode-buttons">
                  <button class="mode-button active" data-mode="attract">
                    <span>Attract</span>
                    <span>‚Ü¶</span>
                  </button>
                  <button class="mode-button" data-mode="repel">
                    <span>Repel</span>
                    <span>‚Ü§</span>
                  </button>
                  <button class="mode-button" data-mode="orbit">
                    <span>Orbit</span>
                    <span>‚§æ</span>
                  </button>
                  <button class="mode-button" data-mode="drift">
                    <span>Drift</span>
                    <span>‚ãØ</span>
                  </button>
                </div>
                <div class="field-info" id="field-info">
                  Mode: <strong>Attract</strong> ‚Äì move your cursor to pull the particles into a shimmering stream.
                </div>
              </article>

              <article class="panel">
                <div class="panel-header">
                  <div class="panel-header-left">
                    <span>NOTES FROM THE LAB</span>
                  </div>
                  <span>log 02</span>
                </div>
                <div class="panel-body">
                  <p>
                    Sometimes you don't want a game, you just want
                    <strong>pretty math</strong> you can wave your mouse through.
                  </p>
                  <p style="margin-top: 0.4rem;">
                    Each particle is gently nudged every frame based on your mode selection.
                    The rules are simple, but the motion feels strangely alive.
                  </p>
                  <p style="margin-top: 0.4rem;">
                    You're basically conducting a tiny orchestra of dots.
                  </p>
                </div>
                <div class="panel-footer">
                  <div class="pill-mini">
                    <span>üß™ Particles:</span>
                    <span id="particle-count">0</span>
                  </div>
                  <div class="pill-mini">
                    <span>üé® Visual style:</span>
                    <span>nebula lines</span>
                  </div>
                </div>
              </article>
            </div>
          </div>

          <!-- Lore Terminal -->
          <div class="app" id="app-lore">
            <div class="app-grid">
              <article class="panel">
                <div class="panel-header">
                  <div class="panel-header-left">
                    <span>LORE TERMINAL</span>
                    <span class="panel-badge">branching text</span>
                  </div>
                  <span>module 03</span>
                </div>
                <div class="terminal">
                  <div class="terminal-header">
                    <span class="terminal-prompt">subdomain@control-center</span>
                    <span>story shell v0.1</span>
                  </div>
                  <div class="terminal-body" id="terminal-body"></div>
                  <div class="choice-row" id="choice-row"></div>
                </div>
              </article>

              <article class="panel">
                <div class="panel-header">
                  <div class="panel-header-left">
                    <span>SESSION ANOMALIES</span>
                  </div>
                  <span>log 03</span>
                </div>
                <div class="panel-body">
                  <p>
                    Somewhere between ‚Äútoy project‚Äù and ‚Äúfull stack app‚Äù is a wonderful gray area
                    where you wire a domain into pure whimsy.
                  </p>
                  <p style="margin-top: 0.4rem;">
                    This terminal doesn't persist anything, doesn't write to any database,
                    and yet it feels like a tiny universe with its own rules.
                  </p>
                  <p style="margin-top: 0.4rem;">
                    The unofficial name for this state of mind is
                    <strong>‚Äúcreative overengineering just because we can.‚Äù</strong>
                  </p>
                </div>
                <div class="panel-footer">
                  <div class="pill-mini">
                    <span>üìö Story length:</span>
                    <span>tiny but replayable</span>
                  </div>
                  <div class="pill-mini">
                    <span>üîê Data stored:</span>
                    <span>0 bytes ¬∑ just vibes</span>
                  </div>
                </div>
              </article>
            </div>
          </div>
        </div>
      </section>
    </div>

    <div class="bottom-bar">
      <div class="bottom-left">
        <span class="bottom-dot"></span>
        <span id="bottom-status">ready ¬∑ choose a module on the left to start exploring.</span>
      </div>
      <div class="bottom-right" id="ticker-text">
        tip: you can completely redesign this console and still keep it all in a single index.html file.
      </div>
    </div>
  </div>

  <script>
    // === starfield background ===
    (function () {
      const canvas = document.getElementById("starfield");
      const ctx = canvas.getContext("2d");
      const stars = [];
      const STAR_COUNT = 140;

      function resize() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
      }
      window.addEventListener("resize", resize);
      resize();

      function makeStar() {
        return {
          x: Math.random() * canvas.width,
          y: Math.random() * canvas.height,
          size: Math.random() * 1.5 + 0.4,
          alpha: Math.random() * 0.6 + 0.2,
          speed: Math.random() * 0.25 + 0.05
        };
      }

      for (let i = 0; i < STAR_COUNT; i++) stars.push(makeStar());

      function loop() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.save();
        ctx.globalCompositeOperation = "lighter";

        stars.forEach(s => {
          s.y += s.speed;
          if (s.y > canvas.height + 6) {
            s.y = -6;
            s.x = Math.random() * canvas.width;
          }
          const g = ctx.createRadialGradient(s.x, s.y, 0, s.x, s.y, s.size * 4);
          g.addColorStop(0, "rgba(226,232,240," + s.alpha + ")");
          g.addColorStop(1, "rgba(15,23,42,0)");
          ctx.fillStyle = g;
          ctx.beginPath();
          ctx.arc(s.x, s.y, s.size * 3, 0, Math.PI * 2);
          ctx.fill();
        });

        ctx.restore();
        requestAnimationFrame(loop);
      }
      loop();
    })();

    // === small clock + status shuffle ===
    (function () {
      const clock = document.getElementById("clock-text");
      const statusPill = document.getElementById("status-pill-text");
      const ticker = document.getElementById("ticker-text");
      const shuffleBtn = document.getElementById("randomize-status");

      const statuses = [
        "online ¬∑ idle",
        "online ¬∑ drifting through CSS nebulae",
        "online ¬∑ listening for stray DNS packets",
        "online ¬∑ waiting for another overbuilt idea",
        "online ¬∑ pretending to be a serious dashboard"
      ];

      const tips = [
        "tip: a GitHub Pages site can be as playful as any game, it's just HTML and imagination.",
        "tip: subdomains are like alternate universes. you can make as many as your DNS allows.",
        "tip: the best experiments rarely have a business case.",
        "tip: you can fork this page and turn it into your own little operating system.",
        "tip: if it makes you smile when you deploy, it was worth building."
      ];

      function updateClock() {
        const now = new Date();
        const hh = String(now.getHours()).padStart(2, "0");
        const mm = String(now.getMinutes()).padStart(2, "0");
        const ss = String(now.getSeconds()).padStart(2, "0");
        clock.textContent = hh + ":" + mm + ":" + ss;
      }

      let statusIndex = 0;
      let tipIndex = 0;
      function setStatus() {
        statusPill.textContent = statuses[statusIndex % statuses.length];
        ticker.textContent = tips[tipIndex % tips.length];
        statusIndex++;
        tipIndex++;
      }

      updateClock();
      setStatus();
      setInterval(updateClock, 1000);

      shuffleBtn.addEventListener("click", setStatus);
    })();

    // === app switching ===
    (function () {
      const buttons = Array.from(document.querySelectorAll(".app-button"));
      const apps = {
        arcade: document.getElementById("app-arcade"),
        field: document.getElementById("app-field"),
        lore: document.getElementById("app-lore")
      };

      const titleLabel = document.getElementById("app-title-label");
      const labelTag = document.getElementById("app-label-tag");
      const subtitle = document.getElementById("app-subtitle");
      const bottomStatus = document.getElementById("bottom-status");
      const focusArcade = document.getElementById("focus-arcade");

      const appMeta = {
        arcade: {
          title: "Arcade ¬∑ Comet Chase",
          tag: "LIVE MODULE",
          subtitle: "Use WASD or arrows to slip through the void, grab shards, and avoid the red hazards.",
          status: "arcade: shields ready ¬∑ drift carefully."
        },
        field: {
          title: "Field Lab ¬∑ Particle Playground",
          tag: "EXPERIMENT",
          subtitle: "Move your cursor and switch modes to sculpt how hundreds of particles flow.",
          status: "field lab: cursor = gravity source."
        },
        lore: {
          title: "Lore Terminal ¬∑ Subdomain Story",
          tag: "TEXT MODE",
          subtitle: "Click choices to uncover a tiny branching story about your accidental space station.",
          status: "terminal: listening for narrative input."
        }
      };

      function activateApp(name) {
        buttons.forEach(btn => {
          btn.classList.toggle("active", btn.dataset.app === name);
        });
        Object.keys(apps).forEach(key => {
          apps[key].classList.toggle("active", key === name);
        });

        const meta = appMeta[name];
        titleLabel.textContent = meta.title;
        labelTag.textContent = meta.tag;
        subtitle.textContent = meta.subtitle;
        bottomStatus.textContent = meta.status;
      }

      buttons.forEach(btn => {
        btn.addEventListener("click", () => {
          activateApp(btn.dataset.app);
        });
      });

      focusArcade.addEventListener("click", () => {
        activateApp("arcade");
      });
    })();

    // === Arcade ¬∑ Comet Chase game ===
    (function () {
      const canvas = document.getElementById("arcade-canvas");
      const ctx = canvas.getContext("2d");

      const scoreEl = document.getElementById("score-value");
      const shieldFill = document.getElementById("shield-fill");
      const diffLabel = document.getElementById("diff-label");
      const overlay = document.getElementById("arcade-overlay");
      const finalText = document.getElementById("arcade-final-text");
      const restartBtn = document.getElementById("arcade-restart");
      const sessionCounter = document.getElementById("session-counter");

      let sessions = 1;
      let width = 0;
      let height = 0;

      function resize() {
        const rect = canvas.getBoundingClientRect();
        width = rect.width;
        height = rect.height;
        canvas.width = width;
        canvas.height = height;
      }
      window.addEventListener("resize", resize);
      resize();

      const keys = {};
      const state = {
        player: { x: width / 2, y: height * 0.7, vx: 0, vy: 0, r: 10 },
        shards: [],
        hazards: [],
        score: 0,
        shield: 100,
        difficulty: 1,
        over: false
      };

      document.addEventListener("keydown", e => {
        const k = e.key.toLowerCase();
        if (["arrowup","arrowdown","arrowleft","arrowright","w","a","s","d"].includes(k)) {
          e.preventDefault();
          keys[k] = true;
        }
      });
      document.addEventListener("keyup", e => {
        keys[e.key.toLowerCase()] = false;
      });

      function randomPos() {
        return {
          x: Math.random() * width,
          y: Math.random() * height * 0.6
        };
      }

      function spawnShard() {
        if (state.shards.length > 12) return;
        if (Math.random() > 0.07) return;
        const p = randomPos();
        state.shards.push({
          x: p.x,
          y: p.y,
          r: 6 + Math.random() * 3,
          wobble: Math.random() * Math.PI * 2,
          wobbleSpeed: 0.05 + Math.random() * 0.04
        });
      }

      function spawnHazard() {
        const maxHazards = 4 + Math.floor(state.difficulty * 2);
        if (state.hazards.length > maxHazards) return;
        if (Math.random() > 0.04) return;
        const fromTop = Math.random() < 0.5;
        const x = Math.random() * width;
        const y = fromTop ? -15 : height + 15;
        const speed = 30 + Math.random() * (40 + state.difficulty * 20);
        const angle = fromTop
          ? Math.PI / 2 + (Math.random() - 0.5) * 0.6
          : -Math.PI / 2 + (Math.random() - 0.5) * 0.6;
        state.hazards.push({
          x,
          y,
          vx: Math.cos(angle) * speed,
          vy: Math.sin(angle) * speed,
          r: 10 + Math.random() * 6
        });
      }

      function handleInput(dt) {
        const p = state.player;
        const accel = 220;
        let ax = 0;
        let ay = 0;

        if (keys["arrowleft"] || keys["a"]) ax -= accel;
        if (keys["arrowright"] || keys["d"]) ax += accel;
        if (keys["arrowup"] || keys["w"]) ay -= accel;
        if (keys["arrowdown"] || keys["s"]) ay += accel;

        p.vx += ax * dt;
        p.vy += ay * dt;

        const drag = 0.9;
        p.vx *= drag;
        p.vy *= drag;

        const maxSpeed = 260;
        const speed = Math.hypot(p.vx, p.vy);
        if (speed > maxSpeed) {
          const s = maxSpeed / speed;
          p.vx *= s;
          p.vy *= s;
        }

        p.x += p.vx * dt;
        p.y += p.vy * dt;

        const r = p.r + 4;
        if (p.x < r) { p.x = r; p.vx *= -0.25; }
        if (p.x > width - r) { p.x = width - r; p.vx *= -0.25; }
        if (p.y < r) { p.y = r; p.vy *= -0.25; }
        if (p.y > height - r) { p.y = height - r; p.vy *= -0.25; }
      }

      function updateObjects(dt) {
        state.shards.forEach(s => {
          s.wobble += s.wobbleSpeed;
        });

        state.hazards.forEach(h => {
          h.x += (h.vx * dt);
          h.y += (h.vy * dt);
        });

        for (let i = state.hazards.length - 1; i >= 0; i--) {
          const h = state.hazards[i];
          if (h.x < -40 || h.x > width + 40 || h.y < -40 || h.y > height + 40) {
            state.hazards.splice(i, 1);
          }
        }

        const p = state.player;
        for (let i = state.shards.length - 1; i >= 0; i--) {
          const s = state.shards[i];
          const d = Math.hypot(p.x - s.x, p.y - s.y);
          if (d < p.r + s.r + 2) {
            state.shards.splice(i, 1);
            state.score += 1;
            state.shield = Math.min(100, state.shield + 8);
          }
        }

        state.hazards.forEach(h => {
          const d = Math.hypot(state.player.x - h.x, state.player.y - h.y);
          if (d < state.player.r + h.r) {
            state.shield -= dt * 40;
          }
        });

        if (state.shield > 0) {
          state.shield += dt * 3;
          if (state.shield > 100) state.shield = 100;
        }

        state.difficulty = 1 + state.score / 15;
        if (state.difficulty < 1) state.difficulty = 1;

        if (state.shield <= 0 && !state.over) {
          endGame();
        }
      }

      function updateHUD() {
        scoreEl.textContent = state.score;
        const shieldRatio = Math.max(0, Math.min(1, state.shield / 100));
        shieldFill.style.width = (shieldRatio * 100).toFixed(1) + "%";

        const d = state.difficulty;
        let label = "Drift";
        if (d > 1.8 && d <= 2.6) label = "Flux";
        else if (d > 2.6 && d <= 3.6) label = "Storm";
        else if (d > 3.6) label = "Chaos";
        diffLabel.textContent = label;
      }

      function drawBackground() {
        const g = ctx.createLinearGradient(0, 0, 0, height);
        g.addColorStop(0, "#020617");
        g.addColorStop(0.4, "#020617");
        g.addColorStop(1, "#000000");
        ctx.fillStyle = g;
        ctx.fillRect(0, 0, width, height);

        ctx.strokeStyle = "rgba(30,64,175,0.35)";
        ctx.lineWidth = 0.6;
        const step = 40;
        ctx.globalAlpha = 0.5;
        for (let x = 0; x <= width; x += step) {
          ctx.beginPath();
          ctx.moveTo(x, 0);
          ctx.lineTo(x, height);
          ctx.stroke();
        }
        for (let y = 0; y <= height; y += step) {
          ctx.beginPath();
          ctx.moveTo(0, y);
          ctx.lineTo(width, y);
          ctx.stroke();
        }
        ctx.globalAlpha = 1;
      }

      function drawShards() {
        state.shards.forEach(s => {
          const bob = Math.sin(s.wobble) * 2;
          const cx = s.x;
          const cy = s.y + bob;

          const g = ctx.createRadialGradient(cx - 3, cy - 3, 0, cx, cy, s.r + 6);
          g.addColorStop(0, "#e0f2fe");
          g.addColorStop(0.4, "#38bdf8");
          g.addColorStop(1, "rgba(15,23,42,0)");
          ctx.fillStyle = g;
          ctx.beginPath();
          ctx.arc(cx, cy, s.r + 4, 0, Math.PI * 2);
          ctx.fill();

          ctx.fillStyle = "#0ea5e9";
          ctx.beginPath();
          ctx.moveTo(cx, cy - s.r);
          ctx.lineTo(cx + s.r * 0.8, cy);
          ctx.lineTo(cx, cy + s.r);
          ctx.lineTo(cx - s.r * 0.8, cy);
          ctx.closePath();
          ctx.fill();

          ctx.strokeStyle = "rgba(15,23,42,0.85)";
          ctx.lineWidth = 1;
          ctx.stroke();
        });
      }

      function drawHazards() {
        state.hazards.forEach(h => {
          const trail = 18;
          const dx = -h.vx / 60;
          const dy = -h.vy / 60;
          const tx = h.x + dx * trail;
          const ty = h.y + dy * trail;

          const g = ctx.createLinearGradient(tx, ty, h.x, h.y);
          g.addColorStop(0, "rgba(248,113,113,0)");
          g.addColorStop(1, "rgba(239,68,68,0.85)");

          ctx.strokeStyle = g;
          ctx.lineWidth = 3;
          ctx.beginPath();
          ctx.moveTo(tx, ty);
          ctx.lineTo(h.x, h.y);
          ctx.stroke();

          const g2 = ctx.createRadialGradient(h.x, h.y, 0, h.x, h.y, h.r + 8);
          g2.addColorStop(0, "#fecaca");
          g2.addColorStop(0.4, "#ef4444");
          g2.addColorStop(1, "rgba(15,23,42,0)");
          ctx.fillStyle = g2;
          ctx.beginPath();
          ctx.arc(h.x, h.y, h.r + 4, 0, Math.PI * 2);
          ctx.fill();

          ctx.strokeStyle = "rgba(15,23,42,0.9)";
          ctx.lineWidth = 1.2;
          ctx.beginPath();
          ctx.arc(h.x, h.y, h.r, 0, Math.PI * 2);
          ctx.stroke();
        });
      }

      function drawPlayer() {
        const p = state.player;
        ctx.save();
        ctx.translate(p.x, p.y);

        const angle = Math.atan2(p.vy, p.vx) || 0;
        ctx.rotate(angle);

        const r = p.r;
        const gradient = ctx.createLinearGradient(-r, 0, r, 0);
        gradient.addColorStop(0, "#22c55e");
        gradient.addColorStop(1, "#0ea5e9");
        ctx.fillStyle = gradient;
        ctx.strokeStyle = "rgba(15,23,42,0.9)";
        ctx.lineWidth = 1.2;

        ctx.beginPath();
        ctx.moveTo(r + 3, 0);
        ctx.lineTo(-r, -r * 0.8);
        ctx.lineTo(-r * 0.3, 0);
        ctx.lineTo(-r, r * 0.8);
        ctx.closePath();
        ctx.fill();
        ctx.stroke();

        ctx.restore();
      }

      let lastTime = null;

      function loop(timestamp) {
        if (!lastTime) lastTime = timestamp;
        const dt = Math.min((timestamp - lastTime) / 1000, 0.035);
        lastTime = timestamp;

        if (!state.over) {
          handleInput(dt);
          spawnShard();
          spawnHazard();
          updateObjects(dt);
        }
        updateHUD();

        drawBackground();
        drawShards();
        drawHazards();
        drawPlayer();

        requestAnimationFrame(loop);
      }

      function resetGame() {
        state.player.x = width / 2;
        state.player.y = height * 0.7;
        state.player.vx = 0;
        state.player.vy = 0;
        state.shards.length = 0;
        state.hazards.length = 0;
        state.score = 0;
        state.shield = 100;
        state.difficulty = 1;
        state.over = false;
        overlay.classList.remove("visible");
      }

      function endGame() {
        state.over = true;
        const msg =
          "You gathered " +
          state.score +
          " shard" +
          (state.score === 1 ? "" : "s") +
          " before the hull gave out.";
        finalText.textContent = msg;
        overlay.classList.add("visible");
        sessions++;
        sessionCounter.textContent = sessions;
      }

      restartBtn.addEventListener("click", () => {
        resetGame();
      });

      resetGame();
      requestAnimationFrame(loop);
    })();

    // === Field Lab ¬∑ particle playground ===
    (function () {
      const canvas = document.getElementById("field-canvas");
      const ctx = canvas.getContext("2d");
      const modeButtons = Array.from(document.querySelectorAll(".mode-button"));
      const fieldInfo = document.getElementById("field-info");
      const particleCountEl = document.getElementById("particle-count");

      let width = 0;
      let height = 0;
      const particles = [];
      const PARTICLE_COUNT = 120;

      const modes = {
        attract: "Mode: Attract ‚Äì move your cursor to pull the particles into a shimmering stream.",
        repel: "Mode: Repel ‚Äì drag your cursor to push particles away and carve out voids.",
        orbit: "Mode: Orbit ‚Äì leave the cursor in place and watch tiny galaxies swirl around it.",
        drift: "Mode: Drift ‚Äì hands off; let the particles wander on their own."
      };
      let mode = "attract";

      const pointer = {
        x: 0,
        y: 0,
        active: false
      };

      function resize() {
        const rect = canvas.getBoundingClientRect();
        width = rect.width;
        height = rect.height;
        canvas.width = width;
        canvas.height = height;
      }
      window.addEventListener("resize", resize);
      resize();

      function makeParticle() {
        const speed = 10 + Math.random() * 15;
        const angle = Math.random() * Math.PI * 2;
        return {
          x: Math.random() * width,
          y: Math.random() * height,
          vx: Math.cos(angle) * speed,
          vy: Math.sin(angle) * speed,
          hue: 190 + Math.random() * 70,
          alpha: 0.4 + Math.random() * 0.4
        };
      }

      for (let i = 0; i < PARTICLE_COUNT; i++) {
        particles.push(makeParticle());
      }
      particleCountEl.textContent = particles.length;

      canvas.addEventListener("pointermove", e => {
        const rect = canvas.getBoundingClientRect();
        pointer.x = e.clientX - rect.left;
        pointer.y = e.clientY - rect.top;
        pointer.active = true;
      });
      canvas.addEventListener("pointerleave", () => {
        pointer.active = false;
      });

      modeButtons.forEach(btn => {
        btn.addEventListener("click", () => {
          modeButtons.forEach(b => b.classList.toggle("active", b === btn));
          mode = btn.dataset.mode;
          fieldInfo.innerHTML = modes[mode].replace("Mode:", "Mode: <strong>") + "</strong>";
        });
      });

      function updateParticles(dt) {
        particles.forEach(p => {
          if (mode !== "drift" && pointer.active) {
            const dx = pointer.x - p.x;
            const dy = pointer.y - p.y;
            const dist = Math.hypot(dx, dy) + 0.0001;
            const dirX = dx / dist;
            const dirY = dy / dist;

            if (mode === "attract") {
              const force = Math.min(80 / dist, 60);
              p.vx += dirX * force * dt;
              p.vy += dirY * force * dt;
            } else if (mode === "repel") {
              const force = Math.min(120 / dist, 80);
              p.vx -= dirX * force * dt;
              p.vy -= dirY * force * dt;
            } else if (mode === "orbit") {
              const force = Math.min(90 / dist, 70);
              const tangentX = -dirY;
              const tangentY = dirX;
              p.vx += tangentX * force * dt;
              p.vy += tangentY * force * dt;
            }
          }

          const drag = 0.9;
          p.vx *= drag;
          p.vy *= drag;

          p.x += p.vx * dt;
          p.y += p.vy * dt;

          if (p.x < -20) p.x = width + 20;
          if (p.x > width + 20) p.x = -20;
          if (p.y < -20) p.y = height + 20;
          if (p.y > height + 20) p.y = -20;
        });
      }

      function drawParticles() {
        ctx.clearRect(0, 0, width, height);
        ctx.save();
        ctx.globalCompositeOperation = "lighter";

        particles.forEach(p => {
          const tailLength = mode === "drift" ? 18 : 22;
          const speed = Math.hypot(p.vx, p.vy) || 1;
          const tx = p.x - (p.vx / speed) * tailLength;
          const ty = p.y - (p.vy / speed) * tailLength;

          const grad = ctx.createLinearGradient(tx, ty, p.x, p.y);
          grad.addColorStop(0, "rgba(15,23,42,0)");
          grad.addColorStop(1, `hsla(${p.hue}, 80%, 70%, ${p.alpha})`);

          ctx.strokeStyle = grad;
          ctx.lineWidth = 1.5;
          ctx.beginPath();
          ctx.moveTo(tx, ty);
          ctx.lineTo(p.x, p.y);
          ctx.stroke();

          ctx.fillStyle = `hsla(${p.hue}, 85%, 80%, ${p.alpha})`;
          ctx.beginPath();
          ctx.arc(p.x, p.y, 2, 0, Math.PI * 2);
          ctx.fill();
        });

        ctx.restore();
      }

      let lastTime = null;
      function loop(time) {
        if (!lastTime) lastTime = time;
        const dt = Math.min((time - lastTime) / 1000, 0.035);
        lastTime = time;

        updateParticles(dt);
        drawParticles();
        requestAnimationFrame(loop);
      }
      requestAnimationFrame(loop);
    })();

    // === Lore Terminal ===
    (function () {
      const bodyEl = document.getElementById("terminal-body");
      const choiceRow = document.getElementById("choice-row");

      const scenes = {
        intro: {
          lines: [
            "booting subdomain story engine...",
            "detected: custom domain wired to GitHub Pages.",
            "status: everything is wildly more dramatic than it needs to be."
          ],
          choices: [
            { label: "continue boot sequence", target: "scan" }
          ]
        },
        scan: {
          lines: [
            "running diagnostics on: testingdomconnect.crewr.co",
            "‚Ä¢ DNS: resolvable",
            "‚Ä¢ TLS: active",
            "‚Ä¢ purpose: unknown (and that's okay)."
          ],
          choices: [
            { label: "declare it a secret space station", target: "station" },
            { label: "treat it like a playground", target: "playground" }
          ]
        },
        station: {
          lines: [
            "classification: orbital outpost.",
            "role: listening post for strange packets and stranger ideas.",
            "unofficial motto: \"no roadmap, only trajectories.\""
          ],
          choices: [
            { label: "log a captain's entry", target: "captain" },
            { label: "reclassify as playground anyway", target: "playground" }
          ]
        },
        captain: {
          lines: [
            "captain's log ¬∑ stardate: whenever you pushed the last commit.",
            "we pointed a subdomain at an html file and the universe did not complain.",
            "crew morale: unreasonably high for a project with zero stakeholders."
          ],
          choices: [
            { label: "end log with a wink", target: "outro" }
          ]
        },
        playground: {
          lines: [
            "classification: cosmic sandbox.",
            "role: testing ground for tiny experiments that make you grin.",
            "guiding principle: \"if it feels overbuilt, you're doing it right.\""
          ],
          choices: [
            { label: "deploy more nonsense", target: "nonsense" },
            { label: "pause and appreciate the view", target: "outro" }
          ]
        },
        nonsense: {
          lines: [
            "todo:",
            "  - add at least one more totally unnecessary visual effect.",
            "  - give something an overly serious name.",
            "  - remember this started from: \"what if I just connect this subdomain for fun?\""
          ],
          choices: [
            { label: "ok but seriously this rules", target: "outro" }
          ]
        },
        outro: {
          lines: [
            "session complete.",
            "your subdomain now has lore, games, a particle lab, and a console.",
            "recommendation: leave it exactly like this, or break it gloriously in your next commit."
          ],
          choices: [
            { label: "run story again", target: "intro" }
          ]
        }
      };

      let currentScene = "intro";
      let typing = false;

      function clearTerminal() {
        bodyEl.innerHTML = "";
      }

      function typeLines(lines, cb) {
        typing = true;
        let lineIndex = 0;
        let charIndex = 0;
        let currentLineEl = null;

        function step() {
          if (lineIndex >= lines.length) {
            typing = false;
            if (cb) cb();
            return;
          }

          if (!currentLineEl) {
            currentLineEl = document.createElement("div");
            currentLineEl.className = "terminal-line";
            bodyEl.appendChild(currentLineEl);
          }

          const line = lines[lineIndex];
          currentLineEl.textContent = line.slice(0, charIndex);
          charIndex++;

          if (charIndex > line.length) {
            currentLineEl = null;
            charIndex = 0;
            lineIndex++;
          }

          bodyEl.scrollTop = bodyEl.scrollHeight;
          const delay = 12 + Math.random() * 20;
          setTimeout(step, delay);
        }
        step();
      }

      function renderChoices(scene) {
        choiceRow.innerHTML = "";
        scene.choices.forEach(choice => {
          const btn = document.createElement("button");
          btn.className = "choice-button";
          btn.textContent = choice.label;
          btn.addEventListener("click", () => {
            goToScene(choice.target);
          });
          choiceRow.appendChild(btn);
        });
      }

      function goToScene(name) {
        if (!scenes[name] || typing) return;
        currentScene = name;
        clearTerminal();
        const scene = scenes[name];
        typeLines(scene.lines, () => renderChoices(scene));
      }

      // initial render
      goToScene("intro");
    })();
  </script>
</body>
</html>
